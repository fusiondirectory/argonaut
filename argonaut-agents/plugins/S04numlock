#NAME:Apply NUM-LOCK settings
#
# /etc/argonaut/config/notebook is a template of the FAI-Class
# Notebook copied to the client.

CFG=~/.kde/share/config/kcminputrc
DIR=$(dirname "$CFG")
STATE=0

if [ ! -e /etc/argonaut/config/notebook ]; then

	# Don't touch if we already have a numlock configuration
	[ -d $DIR ] || mkdir -p $DIR
	[ -f $CFG ] || touch $CFG
	if ! grep -q '^NumLock' $CFG; then

		# Generate keyboard section...
		if ! grep -q '\[Keyboard\]' $CFG; then
			echo -e "\n[Keyboard]\nNumLock=$STATE\n" >> $CFG

		# ... or append the numlock option
		else
			echo -e "?\[Keyboard\]\na\nNumLock=$STATE\n.\nwq\n" | ed $CFG
		fi

	fi
fi

